# セットアップチェックリスト

HyperSystemを稼働させるための完全なチェックリストです。

## Phase 1: 開発環境のセットアップ

### ローカル開発

- [ ] Node.js 18以上をインストール
- [ ] プロジェクトをクローン/ダウンロード
- [ ] `npm install` を実行
- [ ] `.env.local` ファイルを作成
- [ ] 環境変数を設定（後で更新）

### Supabaseプロジェクトの作成

- [ ] Supabaseアカウントを作成
- [ ] 新しいプロジェクトを作成
- [ ] プロジェクトURLをコピー
- [ ] Anon keyをコピー
- [ ] Service role keyをコピー（安全に保管）
- [ ] `.env.local` に環境変数を設定

### データベースのセットアップ

- [ ] SQL Editorを開く
- [ ] `supabase/migrations/00001_initial_schema.sql` を実行
- [ ] テーブルが作成されたことを確認
  - [ ] venues (3件: A, B, C)
  - [ ] users
  - [ ] visit_logs
  - [ ] photos
- [ ] インデックスが作成されたことを確認
- [ ] RLSポリシーが有効になっていることを確認

### Storageのセットアップ

- [ ] `user-icons` バケットを作成
  - [ ] Public bucketを有効化
  - [ ] ファイルサイズ制限: 2MB
  - [ ] 許可形式: image/jpeg, image/png
- [ ] `event-photos` バケットを作成
  - [ ] Public bucketを有効化

### ローカル動作確認

- [ ] `npm run dev` を実行
- [ ] http://localhost:3000 にアクセス
- [ ] トップページが表示される
- [ ] `/checkin/A` にアクセスして登録フォームが表示される
- [ ] 写真とニックネームを入力してチェックイン
- [ ] チェックイン完了画面が表示される
- [ ] 管理画面 `/admin` にアクセス
- [ ] ダッシュボードにチェックインしたユーザーが表示される

## Phase 2: 本番環境へのデプロイ

### GitHubリポジトリ

- [ ] GitHubに新規リポジトリを作成
- [ ] `.gitignore` に `.env*.local` が含まれていることを確認
- [ ] ローカルのコードをコミット
- [ ] GitHubにプッシュ

### Vercelデプロイ

- [ ] Vercelアカウントを作成/ログイン
- [ ] GitHubリポジトリをインポート
- [ ] 環境変数を設定
  - [ ] `NEXT_PUBLIC_SUPABASE_URL`
  - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY`
  - [ ] `SUPABASE_SERVICE_ROLE_KEY`
- [ ] すべての環境（Production, Preview, Development）にチェック
- [ ] デプロイを実行
- [ ] ビルドが成功することを確認
- [ ] デプロイURLをコピー

### 本番環境動作確認

- [ ] デプロイされたURLにアクセス
- [ ] トップページが表示される
- [ ] `/checkin/A` でチェックインをテスト
- [ ] 管理画面が正常に動作する
- [ ] 画像アップロードが動作する
- [ ] リアルタイム更新が動作する

## Phase 3: QRコードの準備

### QRコード生成

- [ ] 本番環境のURLを確認
- [ ] 会場AのQRコードを生成
  - URL: `https://your-domain.com/checkin/A`
- [ ] 会場BのQRコードを生成
  - URL: `https://your-domain.com/checkin/B`
- [ ] 会場CのQRコードを生成
  - URL: `https://your-domain.com/checkin/C`
- [ ] 各QRコードをスマートフォンでスキャンテスト

### QRコード印刷

- [ ] 各QRコードをA4サイズで印刷（各2部）
- [ ] 予備のQRコードを印刷（各1部）
- [ ] 会場名のラベルを追加
- [ ] ラミネート加工（推奨）

## Phase 4: イベント前日の準備

### システムチェック

- [ ] 本番環境が正常に動作している
- [ ] データベース接続が安定している
- [ ] 画像アップロードが動作する
- [ ] 管理画面が正常に表示される

### QRコード設置準備

- [ ] QRコードスタンドを準備
- [ ] 設置場所を確認（各会場の入口）
- [ ] 照明が適切か確認
- [ ] 予備のQRコードを準備

### スタッフブリーフィング

- [ ] システムの使い方を説明
- [ ] QRコードの読み取り方を説明
- [ ] トラブル対応方法を共有
- [ ] 管理画面のURLとアクセス方法を共有
- [ ] 連絡体制を確認

### テストデータのクリア

- [ ] テストユーザーを削除
- [ ] テストログを削除
- [ ] データベースが空であることを確認

## Phase 5: イベント当日

### 開始1時間前

- [ ] QRコードを各会場に設置
- [ ] 各QRコードをスキャンテスト
- [ ] 管理画面で動作確認
- [ ] スタッフを各会場に配置
- [ ] モニタリング担当を決定

### イベント中

- [ ] 定期的に管理画面で人数を確認
- [ ] 来場者のサポート
- [ ] トラブル対応
- [ ] スムーズなチェックインを確保

### イベント終了後

- [ ] QRコードを撤去
- [ ] 最終的な来場者数を確認
- [ ] データをバックアップ
- [ ] レポートを作成

## Phase 6: イベント後の処理

### データ管理

- [ ] 来場者データをエクスポート
- [ ] 写真をダウンロード
- [ ] ローカルにバックアップ
- [ ] 承認済み写真を確認

### マガジン制作

- [ ] 承認済み写真を使用
- [ ] 来場者データを参照
- [ ] マガジンを制作

### データ削除（3〜6ヶ月後）

- [ ] 個人情報の削除
- [ ] 写真の削除
- [ ] データベースのクリア
- [ ] バックアップの削除

## トラブルシューティングチェックリスト

### チェックインできない

- [ ] ネットワーク接続を確認
- [ ] QRコードが正しいか確認
- [ ] URLを直接入力して試す
- [ ] 別の端末で試す
- [ ] Supabaseのステータスを確認

### 画像アップロードできない

- [ ] 画像サイズ（2MB以内）を確認
- [ ] 画像形式（JPG/PNG）を確認
- [ ] ネットワーク接続を確認
- [ ] Storageバケットの設定を確認
- [ ] 別の画像で試す

### 管理画面が重い

- [ ] ブラウザを再起動
- [ ] タブを減らす
- [ ] キャッシュをクリア
- [ ] リアルタイム更新を一時停止
- [ ] 別のブラウザで試す

### データが表示されない

- [ ] ページをリロード
- [ ] ネットワーク接続を確認
- [ ] データベースに接続できるか確認
- [ ] ブラウザのコンソールでエラーを確認
- [ ] Supabaseダッシュボードでデータを確認

## セキュリティチェックリスト

- [ ] `.env.local` がGitにコミットされていない
- [ ] `SUPABASE_SERVICE_ROLE_KEY` が安全に保管されている
- [ ] Supabaseのサービスロールキーが外部に漏れていない
- [ ] データベースのRLSが有効になっている
- [ ] 本番環境でHTTPSが有効になっている
- [ ] 管理画面のアクセスが制限されている（将来的に認証を追加）

## パフォーマンスチェックリスト

- [ ] 画像が最適化されている
- [ ] リアルタイム更新間隔が適切（7秒）
- [ ] データベースインデックスが作成されている
- [ ] キャッシュが適切に設定されている
- [ ] 不要なデータが削除されている

## 最終確認

- [ ] すべての機能が動作する
- [ ] QRコードが正しく機能する
- [ ] 管理画面が正常に表示される
- [ ] データベースが正常に動作する
- [ ] 画像アップロードが動作する
- [ ] スタッフがシステムを理解している
- [ ] トラブル対応マニュアルが準備されている
- [ ] 連絡体制が確立されている

---

## 完了！

すべてのチェックが完了したら、イベントの準備は完了です。
素晴らしいイベントになることを祈っています！🎉

