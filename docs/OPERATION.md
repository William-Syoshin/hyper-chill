# 運用ガイド

イベント当日の運用方法とトラブルシューティングを説明します。

## イベント前日の準備

### 1. システムチェック

- [ ] 本番環境にアクセス可能か確認
- [ ] 管理画面にアクセス可能か確認
- [ ] データベースが正常に動作しているか確認
- [ ] 画像アップロードが動作するか確認

### 2. QRコードの準備

- [ ] 各会場用のQRコード（A/B/C）を印刷
- [ ] QRコードが正しいURLを指しているか確認
- [ ] 予備のQRコードを印刷（各2部ずつ）
- [ ] 設置用のスタンドやテープを準備

### 3. スタッフブリーフィング

- [ ] スタッフにシステムの使い方を説明
- [ ] トラブル時の対応方法を共有
- [ ] 管理画面のURLとアクセス方法を共有
- [ ] 連絡体制を確認

### 4. テストチェックイン

- [ ] 各会場のQRコードでテストチェックイン
- [ ] 管理画面でテストユーザーが表示されるか確認
- [ ] テストデータを削除（本番開始前）

## イベント当日の運用

### 開始前（1時間前）

1. **QRコードの設置**
   - 各会場の入口に設置
   - 目立つ場所、スキャンしやすい高さ
   - 照明が適切か確認

2. **システムの最終確認**
   - すべての会場のQRコードをスキャンテスト
   - 管理画面で動作確認
   - モバイル端末（iOS/Android）でテスト

3. **スタッフ配置**
   - 各会場に案内スタッフを配置
   - 管理画面モニタリング担当を決定

### イベント中

#### モニタリング

管理画面で以下を定期的に確認：

- 会場ごとの人数
- チェックイン状況
- エラーやトラブルの有無

#### 来場者サポート

**よくある質問と回答**

Q: QRコードが読み取れません
A: 
- カメラアプリを起動してQRコードにかざしてください
- 明るい場所で試してください
- カメラのピントを合わせてください

Q: 初回登録で写真がアップロードできません
A:
- 写真サイズが2MB以内か確認してください
- JPGまたはPNG形式か確認してください
- ネットワーク接続を確認してください

Q: 別の会場に移動する場合は？
A:
- 新しい会場のQRコードを読み取るだけでOKです
- 登録は1回だけで、その後は自動で移動が記録されます

#### トラブル対応

**システムが重い/遅い**

1. 管理画面のリアルタイム更新を一時停止
2. ブラウザのタブを閉じて再度開く
3. キャッシュをクリア

**チェックインできない**

1. ネットワーク接続を確認
2. QRコードのURLを直接ブラウザに入力
3. 別の端末で試す
4. Supabaseのステータスページを確認

**画像アップロードエラー**

1. 画像サイズを確認（2MB以内）
2. ファイル形式を確認（JPG/PNG）
3. ネットワーク接続を確認
4. 別の画像で試す

### イベント終了後

#### データのバックアップ

1. 管理画面からCSVエクスポート（将来実装予定）
2. Supabaseダッシュボードからデータベースバックアップ
3. 写真をローカルにダウンロード

#### データ分析

1. 総来場者数の確認
2. 会場ごとの訪問者数
3. ピーク時間の確認
4. 平均移動回数の算出

#### レポート作成

- 来場者数サマリー
- 会場別人数推移
- 人気会場の分析
- 改善点のまとめ

## データ管理

### 個人情報の取り扱い

- 来場者の個人情報（ニックネーム、写真、Instagram ID）は適切に管理してください
- イベント終了後、一定期間経過後はデータを削除してください
- 第三者への提供は行わないでください

### 写真の利用

- 承認した写真のみをマガジン等で使用してください
- 使用前に必ず承認状態を確認してください
- 不適切な写真は非承認にしてください

### データの保存期間

推奨：イベント終了後3ヶ月〜6ヶ月

削除方法：
1. 管理画面から個別に削除
2. Supabaseダッシュボードから一括削除

## トラブルシューティング

### よくあるトラブルと解決方法

| 問題 | 原因 | 解決方法 |
|------|------|----------|
| QRコードが読み取れない | 照明不足、サイズ小 | QRコードを拡大印刷、照明を追加 |
| チェックインが遅い | ネットワーク混雑 | WiFi接続を推奨、4G/5G確認 |
| 画像アップロード失敗 | ファイルサイズ超過 | 画像を圧縮してから再試行 |
| 管理画面が重い | 同時アクセス多数 | ブラウザを再起動、タブを削減 |
| データが表示されない | キャッシュの問題 | ページをリロード、キャッシュクリア |

### 緊急連絡先

- システム管理者: [連絡先]
- Supabaseサポート: https://supabase.com/support
- Vercelサポート: https://vercel.com/support

## パフォーマンス最適化

### 大規模イベント（100名以上）の場合

1. **Supabase Proプランへのアップグレード**
   - より高いパフォーマンス
   - より多い同時接続数

2. **管理画面のアクセス制限**
   - 必要最小限のスタッフのみアクセス
   - リアルタイム更新間隔を長くする

3. **ネットワーク環境の改善**
   - 会場にWiFiを設置
   - 4G/5G接続を推奨

### 小規模イベント（30名以下）の場合

- 無料プランでも十分動作します
- 特別な対応は不要です

## チェックリスト

### イベント前日
- [ ] システム動作確認
- [ ] QRコード印刷
- [ ] スタッフブリーフィング
- [ ] テストチェックイン

### イベント当日（開始前）
- [ ] QRコード設置
- [ ] システム最終確認
- [ ] スタッフ配置確認

### イベント中
- [ ] 定期的なモニタリング
- [ ] 来場者サポート
- [ ] トラブル対応記録

### イベント終了後
- [ ] データバックアップ
- [ ] データ分析
- [ ] レポート作成
- [ ] 改善点まとめ

## 付録

### 管理画面の見方

#### ダッシュボード
- リアルタイムで会場別人数を表示
- 7秒ごとに自動更新
- 総来場者数、チェックイン数などの統計

#### 来場者一覧
- 全来場者のリスト
- 現在地、Instagram IDなどの情報
- ユーザー削除機能

#### 移動ログ
- すべてのチェックインログ
- 時系列で表示
- 人の流れを把握

#### 写真管理
- 投稿された写真の一覧
- 承認/非承認の切り替え
- 写真削除機能

#### 分析
- 会場別ピーク時間
- 統計情報
- 推奨アクション

### 便利なキーボードショートカット

- `Cmd+R` / `F5`: ページリロード
- `Cmd+Shift+R` / `Ctrl+F5`: キャッシュクリア＆リロード
- `Cmd+W` / `Ctrl+W`: タブを閉じる

### 参考リンク

- [Next.js ドキュメント](https://nextjs.org/docs)
- [Supabase ドキュメント](https://supabase.com/docs)
- [Vercel ドキュメント](https://vercel.com/docs)

